/* --- Basic Reset & Layout --- */
* { margin: 0; padding: 0; box-sizing: border-box; }

:root {
    --bg-gradient-1: #87CEEB; --bg-gradient-2: #4682B4; --card-bg: #ffffffd0; --text-color: #333; --input-bg: #f0f0f0; --input-text-color: #555; --button-bg: #e0e0e0; --button-text-color: #333; --shadow-color: rgba(0, 0, 0, 0.2); --ui-elements-bg: #ffffffa0; --ui-elements-color: #333; --ui-active-bg: #2196F3; --ui-active-color: white; --favorite-star-color: #f1c40f;
}

body.dark-mode {
    --bg-gradient-1: #0d1b2a; --bg-gradient-2: #1b263b; --card-bg: #000000d0; --text-color: white; --input-bg: #7c7c7c2b; --input-text-color: white; --button-bg: #7c7c7c2b; --button-text-color: white; --shadow-color: rgba(0, 0, 0, 0.4); --ui-elements-bg: #000000a0; --ui-elements-color: #ddd; --ui-active-bg: #ffffff; --ui-active-color: #333; --favorite-star-color: #f1c40f;
}

body {
    display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: 100vh; font-family: 'Cairo', 'Roboto', sans-serif; background: linear-gradient(135deg, var(--bg-gradient-1), var(--bg-gradient-2)); background-size: 400% 400%; animation: gradientAnimation 15s ease infinite; color: var(--text-color); transition: background 1s ease, color 0.5s ease; overflow-x: hidden; padding-top: 60px;
}

@keyframes gradientAnimation { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }

/* --- Top Control Bar --- */
.top-bar {
    position: fixed; top: 0; left: 0; width: 100%; display: flex; justify-content: space-between; align-items: center; padding: 10px 20px; background: var(--ui-elements-bg); backdrop-filter: blur(5px); z-index: 100;
}
.favorites-container { position: relative; }

/* --- Favorites Styles --- */
.favorites-btn { background: transparent; border: none; color: var(--ui-elements-color); padding: 8px 15px; border-radius: 15px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 8px; font-family: inherit; font-size: 0.9em; }
.favorites-btn:hover { background: #ffffff30; }
.favorites-dropdown { display: none; position: absolute; top: 120%; left: 50%; transform: translateX(-50%); background: var(--card-bg); border-radius: 15px; box-shadow: 0 4px 20px var(--shadow-color); width: 200px; max-height: 250px; overflow-y: auto; z-index: 11; padding: 0.5em; }
.favorites-dropdown.show { display: block; }
.favorite-item { padding: 10px 15px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; border-radius: 10px; transition: background 0.2s ease; }
.favorite-item:hover { background: var(--input-bg); }
.favorite-item .delete-fav { color: #ff5252; font-size: 0.9em; visibility: hidden; opacity: 0; transition: opacity 0.2s; }
.favorite-item:hover .delete-fav { visibility: visible; opacity: 1; }

/* --- City Header & Star --- */
.city-header { display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 0.5em; }
.city { font-size: 1.5em; }
.favorite-toggle { font-size: 1.2em; cursor: pointer; color: #ccc; transition: color 0.3s ease, transform 0.3s ease; }
.favorite-toggle.is-favorite { color: var(--favorite-star-color); transform: scale(1.2); }
.favorite-toggle:hover { transform: scale(1.3); }

/* --- Main Card & Weather Display --- */
.card { background: var(--card-bg); padding: 2em; border-radius: 30px; width: 100%; max-width: 420px; margin: 1em; box-shadow: 0 4px 30px var(--shadow-color); backdrop-filter: blur(5px); border: 1px solid rgba(255, 255, 255, 0.3); color: var(--text-color); transition: background 0.5s ease; }
.search { display: flex; align-items: center; justify-content: center; }
.search-bar { border: none; outline: none; padding: 0.4em 1em; border-radius: 24px; background: var(--input-bg); color: var(--input-text-color); font-family: inherit; font-size: 105%; width: calc(100% - 100px); transition: background 0.5s ease; }
.search-button { margin-inline-start: 1em; border: none; height: 44px; width: 80px; border-radius: 18px; background: var(--button-bg); color: var(--button-text-color); cursor: pointer; transition: 0.2s ease-in-out; }

.weather h1, .weather .weather-info, .weather .humidity-label, .weather .humidity, .weather .wind-label, .weather .wind, .weather .loader, .weather .city-header {
    display: none;
}
.weather.loading .loader { display: block; }
.weather.loaded .city-header, .weather.loaded h1, .weather.loaded .weather-info, .weather.loaded .humidity-label, .weather.loaded .humidity, .weather.loaded .wind-label, .weather.loaded .wind { display: block; }
.weather.loaded .city-header, .weather.loaded .weather-info { display: flex; }
.weather-info { align-items: center; }
.description { text-transform: capitalize; margin-inline-start: 8px; }
.humidity-label, .wind-label { display: inline-block; margin-inline-end: 5px; }
.error-message { text-align: center; margin-top: 1em; color: #ff5252; display: none; }

/* --- UI Elements (Language & Theme) --- */
.language-selector { display: flex; gap: 5px; }
.lang-btn { border: none; background: transparent; color: var(--ui-elements-color); padding: 8px 12px; border-radius: 10px; cursor: pointer; transition: all 0.3s ease; }
.lang-btn:hover { background: #ffffff30; }
.lang-btn.active { background: var(--ui-active-bg); color: var(--ui-active-color); font-weight: bold; }
.theme-switch { position: relative; display: inline-block; width: 50px; height: 26px; }
.theme-switch input { opacity: 0; width: 0; height: 0; }
.slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: var(--ui-elements-bg); transition: .4s; border-radius: 34px; border: 1px solid var(--ui-elements-color); }
.slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 4px; bottom: 3px; background-color: var(--ui-elements-color); transition: .4s; border-radius: 50%; }
input:checked + .slider { background-color: var(--ui-active-bg); }
input:checked + .slider:before { transform: translateX(24px); background-color: var(--ui-active-color); }
.weather .icon { width: 100px; height: 100px; }

/* --- Animations --- */
@keyframes shake { 0%, 100% { transform: translateX(0); } 10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); } 20%, 40%, 60%, 80% { transform: translateX(5px); } }
.search-bar.shake { animation: shake 0.5s ease-in-out; }
.forecast-container { margin-top: 2em; display: none; }
.forecast-title { text-align: center; margin-bottom: 1em; font-weight: 600; font-size: 1.2em; border-bottom: 1px solid var(--text-color); padding-bottom: 0.5em; opacity: 0.8; }
.forecast-days { display: flex; justify-content: space-between; gap: 10px; padding-bottom: 1em; flex-wrap: wrap; }
.forecast-day { flex: 1; min-width: 70px; display: flex; flex-direction: column; align-items: center; text-align: center; background: var(--input-bg); padding: 1em 0.5em; border-radius: 15px; transition: background 0.5s ease; }
@keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
.weather.loaded .city-header, .weather.loaded .temp, .weather.loaded .weather-info, .weather.loaded .humidity-label, .weather.loaded .wind-label, .weather.loaded .humidity, .weather.loaded .wind { animation-name: fadeInUp; animation-duration: 0.6s; animation-fill-mode: both; animation-timing-function: ease-out; }
.weather.loaded .city-header { animation-delay: 0.1s; }
.weather.loaded .temp { animation-delay: 0.2s; }
.weather.loaded .weather-info { animation-delay: 0.3s; }
.forecast-container.animated { animation: fadeInUp 0.6s ease-out 0.6s; animation-fill-mode: both; }

/* --- Responsive Design --- */
@media (max-width: 600px) {
    body { padding-top: 50px; }
    .top-bar { padding: 5px 10px; }
    .favorites-btn span, .lang-btn { font-size: 0.8em; padding: 6px 8px; }
    .card { margin: 0.5em; padding: 1.5em; }
    .forecast-days { justify-content: flex-start; overflow-x: auto; }
    .forecast-day { flex-shrink: 0; min-width: 80px; }
}
